<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

<h1>ðŸ“Š Dashboard General</h1>

<!-- TARJETAS -->
<div class="cards">
    <div class="card azul">
        Alumnos<br>
        <strong>{{ total_alumnos }}</strong>
    </div>

    <div class="card verde">
        Profesores<br>
        <strong>{{ total_profesores }}</strong>
    </div>

    <div class="card gris">
        Directivos<br>
        <strong>{{ total_directivos }}</strong>
    </div>

    <div class="card amarillo">
        Orientadores<br>
        <strong>{{ total_orientadores }}</strong>
    </div>
    <a href="{{ url_for('reportes') }}" class="card reportes">
        <h3>ðŸ“‘ Reportes</h3>
        <p>Ver reportes guardados</p>
    </a>

</div>


<!-- GRAFICAS -->
<div class="graficas">

    <div class="grafica">
        <h3>GrÃ¡fica Circular</h3>
        <canvas id="graficaPastel"></canvas>
    </div>

    <div class="grafica">
        <h3>GrÃ¡fica de Barras</h3>
        <canvas id="graficaBarras"></canvas>
    </div>

    <div class="grafica">
        <h3>GrÃ¡fica de LÃ­neas</h3>
        <canvas id="graficaLineas"></canvas>
    </div>

</div>
<a href="{{ url_for('menu') }}" class="btn-menu">
    â˜° Ir al MenÃº
</a>
<p style="margin-top:50px;"><a href="/login" class="link">Cerrar sesiÃ³n</a></p>

<!-- SCRIPT SIMPLE Y ESTABLE -->
<script>
    const alumnos = Number("{{ total_alumnos }}");
    const profesores = Number("{{ total_profesores }}");
    const directivos = Number("{{ total_directivos }}");
    const orientadores = Number("{{ total_orientadores }}");

    const etiquetas = ['Alumnos', 'Profesores', 'Directivos', 'Orientadores'];
    const valores = [alumnos, profesores, directivos, orientadores];

    /* ===== PASTEL ===== */
    new Chart(document.getElementById('graficaPastel'), {
        type: 'doughnut',
        data: {
            labels: etiquetas,
            datasets: [{
                data: valores,
                backgroundColor: ['#1976d2', '#2e7d32', '#263238', '#fbc02d']
            }]
        }
    });

    /* ===== BARRAS ===== */
    new Chart(document.getElementById('graficaBarras'), {
        type: 'bar',
        data: {
            labels: etiquetas,
            datasets: [{
                label: 'Totales',
                data: valores,
                backgroundColor: '#42a5f5'
            }]
        },
        options: {
            plugins: { legend: { display: false } }
        }
    });

    /* ===== LINEAS ===== */
    new Chart(document.getElementById('graficaLineas'), {
        type: 'line',
        data: {
            labels: etiquetas,
            datasets: [{
                label: 'Totales',
                data: valores,
                borderColor: '#e53935',
                backgroundColor: 'rgba(229,57,53,0.2)',
                fill: true,
                tension: 0.3
            }]
        }
    });
</script>

</body>
</html>
