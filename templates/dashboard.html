<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Dashboard</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
body {
    background: linear-gradient(135deg, #e8f5e9, #f4f6f9);
}

.dashboard-title {
    font-weight: bold;
    color: #1b5e20;
}

.card {
    border-radius: 18px;
    box-shadow: 0 8px 20px rgba(0,0,0,.15);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
    transform: translateY(-6px);
    box-shadow: 0 12px 28px rgba(0,0,0,.25);
}

.card h5 {
    font-weight: bold;
}

.icon {
    font-size: 38px;
    margin-bottom: 5px;
}
</style>

</head>
<body>

<div class="container mt-4">

    <h2 class="text-center mb-4 dashboard-title">
        ğŸ“Š Panel de Control - CECYTEM
    </h2>


    <!-- TARJETAS -->
    <div class="row g-4 text-center">
        <div class="card bg-primary text-white">
            ğŸ“
            <h5>Alumnos</h5>
            <h2>{{ total_alumnos }}</h2>
        </div>


        {% if total_profesores is not none %}
        <div class="card bg-success text-white">
            ğŸ‘¨â€ğŸ«
            <h5>Profesores</h5>
            <h2>{{ total_profesores }}</h2>
        </div>
        {% endif %}

        {% if total_directivos is not none %}
        <div class="card bg-dark text-white">
            ğŸ§‘â€ğŸ’¼
            <h5>Directivos</h5>
            <h2>{{ total_directivos }}</h2>
        </div>
        {% endif %}

        {% if total_orientadores is not none %}
        <div class="card bg-warning text-dark">
            ğŸ§­
            <h5>Orientadores</h5>
            <h2>{{ total_orientadores }}</h2>
        </div>
        {% endif %}

    </div>

    <!-- GRÃFICA -->
    <div class="card mt-5 p-4">
        <h5 class="text-center mb-3">ğŸ“ˆ Resumen General</h5>
        <canvas
            id="grafica"
            data-alumnos="{{ total_alumnos }}"
            data-profesores="{{ total_profesores }}"
            data-directivos="{{ total_directivos }}"
            data-orientadores="{{ total_orientadores }}"
        </canvas>

    </div>

    <!-- BOTÃ“N AL MENÃš -->
    <div class="text-center mt-4">
    <a href="{{ url_for('menu') }}">
            ğŸ“‹ Ir al MenÃº
    <a href="/login" class="link">Cerrar sesiÃ³n</a>

        </a>
    </div>

</div>

<!-- SCRIPT DE LA GRÃFICA -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
const c = document.getElementById('grafica');

const datos = [
  Number(c.dataset.alumnos),
  Number(c.dataset.profesores),
  Number(c.dataset.directivos),
  Number(c.dataset.orientadores),
];

new Chart(c, {
  type: 'bar',
  data: {
    labels: ['Alumnos','Profesores','Directivos','Orientadores','Materias'],
    datasets: [{
      label: 'Totales',
      data: datos
    }]
  },
  options: { responsive: true }
});
</script>


</body>
</html>
