<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Men√∫ Principal - CECYTEM</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/cecytem.css') }}">
</head>
<body>

  <!-- ================= HEADER ================= -->
  <header class="menu-header">
    <div class="header-content">
      <img src="{{ url_for('static', filename='img/logo_cecytem.png') }}" alt="Logo CECYTEM" class="menu-logo">
      <div>
        <h1>Plataforma Institucional CECYTEM</h1>
        <p>Selecciona una de las siguientes secciones para continuar</p>
        <p style="color:#0c0e0f; font-weight:bold;">Has iniciado como: {{ session['tipo_usuario']|capitalize }}</p>
      </div>
    </div>
  </header>

  <!-- ================= MAIN ================= -->
  <main class="menu-container">
    <div class="menu-grid">
      {% set rol = session['tipo_usuario'] %}

      <!-- PROFESORES -->
      <a href="/profesor" class="menu-item {% if rol not in ['directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/profesor.png') }}" alt="Profesor">
        <h2>Profesores</h2>
      </a>

      <!-- ALUMNOS -->
      <a href="/alumno" class="menu-item {% if rol not in ['directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/alumno.png') }}" alt="Alumno">
        <h2>Alumnos</h2>
      </a>

      <!-- ORIENTADORES -->
      <a href="/orientador" class="menu-item {% if rol not in ['directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/orientador.png') }}" alt="Orientador">
        <h2>Orientadores</h2>
      </a>

      <!-- DIRECTIVOS -->
      <a href="/directivo" class="menu-item {% if rol != 'directivo' %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/directivo.png') }}" alt="Directivo">
        <h2>Directivos</h2>
      </a>

      <!-- MATERIAS -->
      <a href="/materia" class="menu-item {% if rol not in ['directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/materia.png') }}" alt="Materia">
        <h2>Materia</h2>
      </a>

      <!-- RECURSOS -->
      <a href="/recursos" class="menu-item {% if rol not in ['orientador','profesor','directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/recursos.png') }}" alt="Recursos">
        <h2>Recursos</h2>
      </a>

      <!-- CHAT -->
      <a href="/chat" class="menu-item {% if rol not in ['alumno','orientador','profesor','directivo'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/chat.png') }}" alt="Chat">
        <h2>Chat</h2>
      </a>

      <!-- REPORTES -->
      <a href="/reportes" class="menu-item {% if rol not in ['directivo', 'profesor'] %}bloqueado{% endif %}">
        <img src="{{ url_for('static', filename='img/reporte.png') }}" alt="Reportes">
        <h2>Reportes</h2>
      </a>

      <!-- BOT√ìN FLOTANTE -->
      <a href="/buscar" class="menu-item">
        üîç Buscar recursos
      </a>
    </div>

    <!-- ENLACES DE NAVEGACI√ìN -->
    <p><a href="/login" class="link">Cerrar sesi√≥n</a></p>
    <p><a href="{{ url_for('dashboard') }}" class="link">‚¨Ö Dashboard</a></p>
  </main>

  <!-- ================= FOOTER ================= -->
  <footer class="menu-footer">
    <p>¬© 2025 Colegio de Estudios Cient√≠ficos y Tecnol√≥gicos del Estado de M√©xico</p>
  </footer>

  <!-- ================= SCRIPTS ================= -->
  <script>
    // ===== Bloqueo de elementos =====
    document.querySelectorAll('.bloqueado').forEach(item => {
      item.addEventListener('click', e => {
        e.preventDefault();
        item.classList.add('shake');
        setTimeout(() => item.classList.remove('shake'), 400);
      });
    });

    // ===== Cerrar sesi√≥n por inactividad =====
    let tiempoInactivo;
    function reiniciarTiempo() {
      clearTimeout(tiempoInactivo);
      tiempoInactivo = setTimeout(() => {
        alert("Sesi√≥n cerrada por inactividad.");
        window.location.href = "/";
      }, 180000); // 3 minutos
    }
    window.onload = reiniciarTiempo;
    document.onmousemove = reiniciarTiempo;
    document.onkeypress = reiniciarTiempo;
    document.onclick = reiniciarTiempo;
    document.onscroll = reiniciarTiempo;
  </script>
</body>
</html>
